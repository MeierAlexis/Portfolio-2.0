---
import Header from "../components/Header.astro";
import About from "../components/About.astro";
import Projects from "./Projects.astro";
import Education from "./Education.astro";
import Footer from "./Footer.astro";
---


<div id="content-wrapper" class="flex w-full pt-30 pr-60 pl-60  items-start justify-center">
	<!-- it will be sticky when it exceeds the hero section -->
	<div id="sidebar" class="flex w-1/3 sticky top-0">
		<Header />
    </div>

	<!-- scrollable content -->
	<main class="w-1/2 overflow-y-auto">
		<About />
		<Projects />
		<Education/>
		<Footer /> 
	</main>
</div>

<script>
	document.addEventListener("DOMContentLoaded", () => {
		let sidebar = document.getElementById("sidebar");
		let contentWrapper = document.getElementById("content-wrapper");

		if (!sidebar || !contentWrapper) return;

		window.onscroll = () => {
			let scrollTop = window.scrollY;
			let viewportHeight = window.innerHeight;
			let contentHeight = contentWrapper.getBoundingClientRect().height;

			// sticky the scroll when it exceeds the hero section
			if (scrollTop >= contentHeight - viewportHeight) {
				sidebar.style.position = "fixed";
				sidebar.style.top = "0";
				sidebar.style.left = "60px"; 
			} else {
				sidebar.style.position = "sticky";
				sidebar.style.top = "0";
				sidebar.style.left = "";
			}
		};
	});
</script>